<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>Reserva de Mesa ‚Ä¢ Mercatto Del√≠cia</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#fafafa;--card:#fff;--text:#111827;--muted:#6b7280;
  --accent:#b8860b;--accent-dark:#8b6a05;--radius:12px;
  --shadow:0 6px 18px rgba(0,0,0,.08);
}
body{
  font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);
  display:flex;align-items:center;justify-content:center;min-height:100vh;
  flex-direction:column;padding:0;margin:0;
}

/* ===== Banner ===== */
.banner{
  width:100%;text-align:center;background:var(--accent);
  color:#fff;padding:16px 0;font-size:1.3rem;font-weight:700;
  box-shadow:0 2px 10px rgba(0,0,0,.1);letter-spacing:.5px;
}

/* ===== Form ===== */
form{
  background:var(--card);padding:24px;border-radius:var(--radius);
  box-shadow:var(--shadow);width:92%;max-width:420px;margin-top:20px;
}
h1{text-align:center;color:var(--accent);margin-bottom:16px;font-size:1.4rem;}
label{font-weight:600;display:block;margin:12px 0 4px;}
input,select,textarea{
  width:100%;padding:12px;border:1px solid #d1d5db;border-radius:var(--radius);
  font-size:15px;outline:none;
}
input:focus,select:focus,textarea:focus{
  border-color:var(--accent);box-shadow:0 0 0 2px rgba(184,134,11,.2);
}
.row{display:flex;gap:10px;}
.row>div{flex:1;}
.radio-group{display:flex;gap:15px;align-items:center;margin-top:6px;}
.radio-group label{font-weight:400;cursor:pointer;}
button{
  width:100%;background:var(--accent);color:#fff;font-weight:600;
  border:none;padding:12px;border-radius:var(--radius);margin-top:20px;
  font-size:16px;cursor:pointer;position:relative;overflow:hidden;
  transition:background .2s ease;
}
button:hover{background:var(--accent-dark);}
button:disabled{opacity:0.8;cursor:not-allowed;}

/* ===== Loader interno ===== */
.btn-loader{
  position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
  display:none;width:20px;height:20px;border:2px solid #fff;
  border-top:2px solid transparent;border-radius:50%;
  animation:spin 0.8s linear infinite;
}
@keyframes spin{to{transform:translate(-50%,-50%) rotate(360deg);}}

/* ===== Pop-up ===== */
.popup-overlay{
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;
  z-index:99;
}
.popup{
  background:#fff;border-radius:var(--radius);padding:24px;text-align:center;
  box-shadow:var(--shadow);width:85%;max-width:360px;animation:fadeIn .3s ease;
}
.popup h2{color:var(--accent);margin-bottom:10px;}
.popup p{color:var(--text);font-size:.95rem;margin-bottom:20px;}
.popup button{
  background:var(--accent);color:#fff;border:none;border-radius:var(--radius);
  padding:10px 20px;font-weight:600;cursor:pointer;font-size:.95rem;
}
@keyframes fadeIn{from{opacity:0;transform:scale(.95);}to{opacity:1;transform:scale(1);}}
#alerta-email{
  font-size:.85rem;color:var(--muted);margin-top:10px;text-align:center;
  background:#fff8e6;border:1px solid #fcd34d;padding:8px;border-radius:var(--radius);
}
#campoOutro{display:none;}
</style>
</head>
<body>

<div class="banner">üçΩÔ∏è Mercatto Del√≠cia</div>

<form id="reservaForm">
  <h1>Reserva de Mesa</h1>

  <label>Nome Completo</label>
  <input type="text" name="nome" required>

  <label>E-mail</label>
  <input type="email" name="email" placeholder="exemplo@email.com" required>

  <div class="row">
    <div>
      <label>Data</label>
      <input type="date" name="data" required>
    </div>
    <div>
      <label>Hor√°rio</label>
      <input type="time" name="horario" required>
    </div>
  </div>

  <label>√Årea</label>
  <select name="area" required>
    <option value="">Selecione</option>
    <option>Sal√£o Principal</option>
    <option>Varanda</option>
    <option>√Årea Externa</option>
    <option>VIP / Reservado</option>
  </select>

  <label>N¬∫ de Pessoas</label>
  <input type="number" name="pessoas" min="1" placeholder="Ex: 4" required>

  <label>Contato (WhatsApp)</label>
  <input type="tel" name="contato" id="whatsapp" inputmode="numeric" placeholder="(DDD) 9XXXX-XXXX" maxlength="15" required>

  <label>Ocasi√£o</label>
  <select name="ocasiao" id="ocasiao" required>
    <option value="">Selecione</option>
    <option>Anivers√°rio</option>
    <option>Reuni√£o</option>
    <option>Confraterniza√ß√£o</option>
    <option value="Outro">Outro</option>
  </select>

  <div id="campoOutro">
    <label>Descreva a Ocasi√£o</label>
    <input type="text" name="ocasiao_outro" placeholder="Qual √© a ocasi√£o?">
  </div>

  <label>Decora√ß√£o</label>
  <input type="text" name="decoracao" placeholder="Ex: Bal√µes dourados, flores vermelhas, etc.">

  <label>Comandas Individuais</label>
  <div class="radio-group">
    <label><input type="radio" name="comandas" value="Sim" required> Sim</label>
    <label><input type="radio" name="comandas" value="N√£o" required> N√£o</label>
  </div>

  <label>Observa√ß√µes</label>
  <textarea name="obs" rows="3" placeholder="Detalhes adicionais..."></textarea>

  <div id="alerta-email">
    ‚ö†Ô∏è A confirma√ß√£o da reserva ser√° enviada por e-mail.<br>
    Em caso de d√∫vidas, entre em contato via WhatsApp.
  </div>

  <button type="submit" id="btnEnviar">
    <span class="btn-text">Enviar Reserva</span>
    <div class="btn-loader"></div>
  </button>
</form>

<!-- Pop-up -->
<div class="popup-overlay" id="popup">
  <div class="popup">
    <h2>‚úÖ Reserva Enviada!</h2>
    <p>Sua solicita√ß√£o foi registrada com sucesso.<br>Em breve entraremos em contato para confirmar.</p>
    <button onclick="fecharPopup()">Fechar</button>
  </div>
</div>

<script>
const scriptURL = 'https://script.google.com/macros/s/AKfycbz3AJRCAVH4Ec9pajHjkzxejtNqR8l3KYtNXisriKV-OU9nD5rWh7ltHFTuP90YY4UxIQ/exec';
const form = document.getElementById('reservaForm');
const ocasiaoSelect = document.getElementById('ocasiao');
const campoOutro = document.getElementById('campoOutro');
const whatsappInput = document.getElementById('whatsapp');
const popup = document.getElementById('popup');
const btn = document.getElementById('btnEnviar');
const btnText = btn.querySelector('.btn-text');
const btnLoader = btn.querySelector('.btn-loader');

// campo "outro"
ocasiaoSelect.addEventListener('change',()=>{
  campoOutro.style.display=ocasiaoSelect.value==='Outro'?'block':'none';
});

// m√°scara de telefone
whatsappInput.addEventListener('input',(e)=>{
  let v=e.target.value.replace(/\D/g,'');
  v=v.replace(/^(\d{2})(\d)/g,'($1) $2');
  v=v.replace(/(\d{5})(\d)/,'$1-$2');
  e.target.value=v.substring(0,15);
});

// envio
form.addEventListener('submit',async(e)=>{
  e.preventDefault();
  btn.disabled=true;
  btnText.style.opacity='0';
  btnLoader.style.display='block';
  const data=new FormData(form);
  try{
    await fetch(scriptURL,{method:'POST',body:data});
    form.reset();
    campoOutro.style.display='none';
    abrirPopup();
  }catch(err){
    alert('‚ùå Erro ao enviar. Tente novamente.');
  }finally{
    btn.disabled=false;
    btnText.style.opacity='1';
    btnLoader.style.display='none';
  }
});

function abrirPopup(){
  popup.style.display='flex';
}
function fecharPopup(){
  popup.style.display='none';
}
</script>

</body>
</html>
